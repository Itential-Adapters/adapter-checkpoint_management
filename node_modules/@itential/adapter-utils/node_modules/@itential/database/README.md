# Database

This module provides a global database connector for pronghorn and pronghorn apps. Currently, as of build 2019.1, this is limited to just creating MongoDB connections.

## Installation & Usage

Add database as a dependency:

```
npm install --save @itential/database
```

In your project, add the database:

```js
const { MongoDBConnection } = require('@itential/database');
//Optionally, if your project also needs access to the MongoDB
//ObjectId, you can do
const { MongoDBConnection, ObjectId } = require('@itential/database');

// pass in any db properties you intend to use for connectivity, etc.
const db = new MongoDBConnection(pronghornProps.mongoProps);
// connect and do some stuff
db.connect(true)
  .then((db) => {
    // do something
    this.db = db;
    /*
    * Options for handling events that are broadcast from the db object
    */
    this.db.on("authenticated", () => {
        //Event emitted when the DB connection has been authenticated.
    });
    this.db.on("close", () => {
      //Do something if you need to handle when the DB
      //connection closes.
    });
    this.db.on("timeout", () => {
      //Do something if you need to handle a connection timeout
    });

  })
  .catch((err) => {
    log.error(err);
  });
```

## Available Properties

 > Coming soon: mongoProps

Maintained by:
---

Itential Platform Team

Check the [changelog](CHANGELOG.md) for the latest changes.
