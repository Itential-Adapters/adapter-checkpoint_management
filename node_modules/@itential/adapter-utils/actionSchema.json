{
  "$id": "action-schemas",
  "type": "object",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "properties": {
    "actions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "the action being performed",
            "examples": [
              "get_config"
            ]
          },
          "protocol": {
            "type": "string",
            "description": "the protocol to use for this action",
            "default": "REST",
            "enum": [
              "REST"
            ]
          },
          "method": {
            "type": "string",
            "description": "the method to use for this action",
            "default": "GET",
            "enum": [
              "GET", "POST", "PUT", "DELETE", "PATCH", "HEAD", "OPTIONS", "TRACE", "CONNECT"
            ]
          },
          "entitypath": {
            "type": "string",
            "description": "the path to use for this action",
            "default": "GET",
            "pattern": "^({base_path}|\/)[-a-zA-Z0-9@:%_+.~#\\/]*({version})?([-a-zA-Z0-9@:%_+.~#\\/]*{pathv[0-9]+})*(\\??[-a-zA-Z0-9@:%_+.~#\\/*=]*({query})?)?$",
            "examples": [
              "/api/devices{pathv1}{query}", "/api/devices{pathv1}/components{pathv2}{query}",
              "/api/devices", "/api/devices{query}"
            ]
          },
          "querykey": {
            "type": "string",
            "description": "anything that should proceed the query in the entitypath",
            "default": "?",
            "examples": [
              "?query=", "?sysparam_query="
            ]
          },
          "timeout": {
            "type": "integer",
            "description": "request timeout for this action"
          },
          "sendEmpty": {
            "type": "boolean",
            "description": "whether to send an empty body"
          },
          "datatype": {
            "type": "string",
            "description": "the type of data used in this action",
            "default": "JSON",
            "enum": [
              "XML", "PLAIN", "JSON"
            ]
          },
          "schema": {
            "type": "string",
            "description": "the name of the schema file for this action",
            "examples": [
              "schema.json"
            ]
          },
          "requestSchema": {
            "type": "string",
            "description": "the name of the request schema file for this action (will override the schema)",
            "examples": [
              "req_schema.json"
            ]
          },
          "responseSchema": {
            "type": "string",
            "description": "the name of the response schema file for this action (will override the schema)",
            "examples": [
              "resp_schema.json"
            ]
          },
          "responseObjects": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "description": "the response type - based on the entitypath",
                  "default": "default",
                  "enum": [
                    "default", "withpathv1", "withpathv2", "withpathv3", "withquery"
                  ]
                },
                "key": {
                  "type": "string",
                  "description": "the field in the response where the data we want is",
                  "default": "",
                  "examples": [
                    "result"
                  ]
                },
                "mockFile": {
                  "type": "string",
                  "description": "the relative location of a data file containing a mock response",
                  "examples": [
                    "mockdatafiles/actionname.json"
                  ]
                }
              },
              "required": ["type", "key"]
            }
          }
        },
        "required": ["name", "protocol", "method", "entitypath"],
        "oneOf": [
          {
            "required": ["schema"]
          },
          {
            "required": ["requestSchema","responseSchema"]
          }      
        ]
      }
    }
  },
  "required": ["actions"],
  "definitions": {}
}